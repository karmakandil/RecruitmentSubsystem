import { Model } from 'mongoose';
import { CreatePayrollRunDto } from './dto/CreatePayrollRunDto.dto';
import { EmployeePayrollDetailsUpsertDto } from './dto/EmployeePayrollDetailsUpsertDto.dto';
import { PublishRunForApprovalDto } from './dto/PublishRunForApprovalDto.dto';
import { payrollRuns, payrollRunsDocument } from './models/payrollRuns.schema';
import { employeePayrollDetails, employeePayrollDetailsDocument } from './models/employeePayrollDetails.schema';
import { employeeSigningBonus, employeeSigningBonusDocument } from './models/EmployeeSigningBonus.schema';
import { EmployeeTerminationResignation, EmployeeTerminationResignationDocument } from './models/EmployeeTerminationResignation.schema';
import { PayslipDocument } from './models/payslip.schema';
import { PayrollConfigurationService } from '../payroll-configuration/payroll-configuration.service';
import { PayrollTrackingService } from '../payroll-tracking/payroll-tracking.service';
import { EmployeeProfileService } from '../employee-profile/employee-profile.service';
import { LeavesService } from '../leaves/leaves.service';
import { SigningBonusReviewDto } from './dto/SigningBonusReviewDto.dto';
import { SigningBonusEditDto } from './dto/SigningBonusEditDto.dto';
import { CreateEmployeeSigningBonusDto } from './dto/CreateEmployeeSigningBonusDto.dto';
import { CreateEmployeeTerminationBenefitDto } from './dto/CreateEmployeeTerminationBenefitDto.dto';
import { TerminationBenefitReviewDto } from './dto/TerminationBenefitReviewDto.dto';
import { TerminationBenefitEditDto } from './dto/TerminationBenefitEditDto.dto';
import { FinanceDecisionDto } from './dto/FinanceDecisionDto.dto';
import { ManagerApprovalReviewDto } from './dto/ManagerApprovalReviewDto.dto';
import { ReviewPayrollPeriodDto } from './dto/ReviewPayrollPeriodDto.dto';
import { EditPayrollPeriodDto } from './dto/EditPayrollPeriodDto.dto';
import { employeePenaltiesDocument } from './models/employeePenalties.schema';
import { EmployeeSystemRoleDocument } from '../employee-profile/models/employee-system-role.schema';
export declare class PayrollExecutionService {
    private payrollRunModel;
    private employeePayrollDetailsModel;
    private employeeSigningBonusModel;
    private employeeTerminationResignationModel;
    private paySlipModel;
    private employeePenaltiesModel;
    private employeeSystemRoleModel;
    private readonly payrollConfigurationService;
    private payrollTrackingService;
    private readonly employeeProfileService;
    private readonly leavesService;
    constructor(payrollRunModel: Model<payrollRunsDocument>, employeePayrollDetailsModel: Model<employeePayrollDetailsDocument>, employeeSigningBonusModel: Model<employeeSigningBonusDocument>, employeeTerminationResignationModel: Model<EmployeeTerminationResignationDocument>, paySlipModel: Model<PayslipDocument>, employeePenaltiesModel: Model<employeePenaltiesDocument>, employeeSystemRoleModel: Model<EmployeeSystemRoleDocument>, payrollConfigurationService: PayrollConfigurationService, payrollTrackingService: PayrollTrackingService, employeeProfileService: EmployeeProfileService, leavesService: LeavesService);
    createPayrollRun(createPayrollRunDto: CreatePayrollRunDto, currentUserId: string): Promise<payrollRuns>;
    reviewPayroll(runId: string, reviewDto: PublishRunForApprovalDto, currentUserId: string): Promise<payrollRuns>;
    generateEmployeePayrollDetails(employeePayrollDetailsDto: EmployeePayrollDetailsUpsertDto, currentUserId: string): Promise<employeePayrollDetails>;
    flagPayrollException(runId: string, exceptionCode: string, exceptionMessage: string, currentUserId: string, employeeId?: string): Promise<payrollRuns>;
    private addExceptionToEmployee;
    detectIrregularities(payrollRunId: string, currentUserId: string): Promise<string[]>;
    private validatePreInitiationRequirements;
    getPreInitiationValidationStatus(currentUserId: string): Promise<{
        canInitiate: boolean;
        pendingSigningBonuses: number;
        pendingTerminationBenefits: number;
        pendingItems: Array<{
            type: 'signing_bonus' | 'termination_benefit';
            id: string;
            employeeId: string;
            employeeNumber?: string;
            itemName: string;
            amount: number;
            createdAt: Date;
        }>;
    }>;
    private validateStatusTransition;
    lockPayroll(runId: string, currentUserId: string): Promise<payrollRuns>;
    unlockPayroll(runId: string, unlockReason: string, currentUserId: string): Promise<payrollRuns>;
    freezePayroll(runId: string, currentUserId: string): Promise<payrollRuns>;
    unfreezePayroll(runId: string, unfreezeReason: string, currentUserId: string): Promise<payrollRuns>;
    private extractEntityAndCurrency;
    private formatEntityWithCurrency;
    private getPayrollRunCurrency;
    private getCurrencyConversionRate;
    private convertCurrency;
    processPayrollInitiation(payrollPeriod: Date, entity: string, payrollSpecialistId: string, currency: string | undefined, currentUserId: string, payrollManagerId?: string): Promise<payrollRuns>;
    private findDefaultPayrollManager;
    private validatePayrollPeriodAgainstContracts;
    reviewPayrollInitiation(runId: string, approved: boolean, reviewerId: string, rejectionReason: string | undefined, currentUserId: string): Promise<payrollRuns>;
    editPayrollInitiation(runId: string, updates: Partial<CreatePayrollRunDto>, currentUserId: string): Promise<payrollRuns>;
    reviewPayrollPeriod(reviewDto: ReviewPayrollPeriodDto, currentUserId: string): Promise<payrollRuns>;
    editPayrollPeriod(editDto: EditPayrollPeriodDto, currentUserId: string): Promise<payrollRuns>;
    processSigningBonuses(currentUserId: string): Promise<employeeSigningBonus[]>;
    createEmployeeSigningBonus(createDto: CreateEmployeeSigningBonusDto, currentUserId: string): Promise<employeeSigningBonus>;
    reviewSigningBonus(reviewDto: SigningBonusReviewDto, currentUserId: string): Promise<employeeSigningBonus>;
    editSigningBonus(editDto: SigningBonusEditDto, currentUserId: string): Promise<employeeSigningBonus>;
    processTerminationResignationBenefits(currentUserId: string): Promise<EmployeeTerminationResignation[]>;
    createEmployeeTerminationBenefit(createDto: CreateEmployeeTerminationBenefitDto, currentUserId: string): Promise<EmployeeTerminationResignation>;
    reviewTerminationBenefit(reviewDto: TerminationBenefitReviewDto, currentUserId: string): Promise<EmployeeTerminationResignation>;
    editTerminationBenefit(editDto: TerminationBenefitEditDto, currentUserId: string): Promise<EmployeeTerminationResignation>;
    calculatePayroll(employeeId: string, payrollRunId: string, baseSalary: number | undefined, currentUserId: string): Promise<employeePayrollDetails>;
    private checkNewHire;
    private getTerminationInfo;
    private checkTermination;
    private checkResignation;
    private calculatePenalties;
    private calculatePenaltiesWithBreakdown;
    private getApplicableAllowancesForEmployee;
    private calculateRefunds;
    calculateProratedSalary(employeeId: string, baseSalary: number, startDate: Date, endDate: Date, payrollPeriodEnd: Date, currentUserId: string): Promise<number>;
    applyStatutoryRules(baseSalary: number, employeeId: string, currentUserId: string): Promise<number>;
    private applyStatutoryRulesWithBreakdown;
    generateDraftPayrollRun(payrollPeriod: Date, entity: string, payrollSpecialistId: string, currency: string | undefined, currentUserId: string, payrollManagerId?: string): Promise<payrollRuns>;
    private generateDraftDetailsForPayrollRun;
    private getDeductionsBreakdown;
    private getEmployeePayrollCurrency;
    getPayrollPreview(payrollRunId: string, targetCurrency: string | undefined, currentUserId: string): Promise<any>;
    generateAndDistributePayslips(payrollRunId: string, distributionMethod: 'PDF' | 'EMAIL' | 'PORTAL', currentUserId: string): Promise<any>;
    private distributePayslipAsPDF;
    private distributePayslipViaEmail;
    private distributePayslipViaPortal;
    sendForApproval(payrollRunId: string, managerId: string, financeStaffId: string, currentUserId: string): Promise<payrollRuns>;
    approvePayrollDisbursement(financeDecisionDto: FinanceDecisionDto, currentUserId: string): Promise<payrollRuns>;
    resolveIrregularity(payrollRunId: string, employeeId: string, exceptionCode: string, resolution: string, managerId: string, currentUserId: string): Promise<{
        payrollRun: payrollRuns;
        employeePayrollDetails: employeePayrollDetails;
    }>;
    getEmployeeExceptions(employeeId: string, payrollRunId: string, currentUserId: string): Promise<{
        activeExceptions: any[];
        resolvedExceptions: any[];
        exceptionHistory: any[];
        deductionsBreakdown: any | null;
    }>;
    private getEmployeeHistoricalPayrollData;
    getAllPayrollExceptions(payrollRunId: string, currentUserId: string): Promise<{
        totalExceptions: number;
        activeExceptions: number;
        resolvedExceptions: number;
        employeeExceptions: Array<{
            employeeId: string;
            activeExceptions: any[];
            resolvedExceptions: any[];
        }>;
    }>;
    approvePayrollRun(managerApprovalDto: ManagerApprovalReviewDto, currentUserId: string): Promise<payrollRuns>;
}
